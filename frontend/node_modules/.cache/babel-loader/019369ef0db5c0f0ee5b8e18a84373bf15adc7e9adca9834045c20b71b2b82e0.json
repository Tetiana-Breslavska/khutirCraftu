{"ast":null,"code":"import{useState,useEffect}from'react';import{Link}from\"react-router-dom\";import{useUser}from'../../context/use-user';import{useBooks}from'../../context/use-books';import{LocalStorageService}from\"../../services/localStorage\";import styles from'./Navbar.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Navbar(){const[totalCount,setTotalCount]=useState(0);const{user,setUser}=useUser();const{addedBooks,setAddedBooks}=useBooks();const[isMarked,setIsMarked]=useState(false);const style={color:isMarked?'#dc3545':'',transition:'0.2s'};useEffect(()=>{setTotalCount(addedBooks.reduce((acc,curr)=>{return acc+curr.count;},0));setIsMarked(true);setTimeout(()=>{setIsMarked(false);},200);},[addedBooks]);const clean=()=>{LocalStorageService.removeAll();setUser('');setAddedBooks([]);};return/*#__PURE__*/_jsx(\"nav\",{className:styles.navbar,children:/*#__PURE__*/_jsxs(\"div\",{className:\"container d-flex justify-content-end\",children:[/*#__PURE__*/_jsx(Link,{to:\"/bookList\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-book\"})}),/*#__PURE__*/_jsxs(Link,{className:styles.cart_icon,to:\"/cart\",children:[/*#__PURE__*/_jsx(\"i\",{style:style,className:\"fa-solid fa-cart-shopping\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.cart_counter,children:totalCount})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-user-large\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.user,children:user})]}),/*#__PURE__*/_jsx(Link,{onClick:clean,to:\"/\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-person-walking-dashed-line-arrow-right\"})})]})});}","map":{"version":3,"names":["useState","useEffect","Link","useUser","useBooks","LocalStorageService","styles","jsx","_jsx","jsxs","_jsxs","Navbar","totalCount","setTotalCount","user","setUser","addedBooks","setAddedBooks","isMarked","setIsMarked","style","color","transition","reduce","acc","curr","count","setTimeout","clean","removeAll","className","navbar","children","to","cart_icon","cart_counter","onClick"],"sources":["E:/Dragon/IT/ciklum/X-course-task/x-course-task/src/components/Navbar/Navbar.js"],"sourcesContent":["import {useState, useEffect} from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { useUser } from '../../context/use-user';\r\nimport { useBooks } from '../../context/use-books';\r\nimport { LocalStorageService } from \"../../services/localStorage\";\r\nimport styles from './Navbar.module.scss';\r\n\r\nexport default function Navbar() {\r\n    const [ totalCount, setTotalCount ] = useState(0);\r\n    const { user, setUser } = useUser();\r\n    const { addedBooks, setAddedBooks } = useBooks();\r\n    const [isMarked, setIsMarked] = useState(false);\r\n    const style = {\r\n        color: isMarked ? '#dc3545' : '',\r\n        transition: '0.2s', \r\n    };\r\n\r\n    useEffect(()=>{\r\n        setTotalCount(addedBooks.reduce((acc, curr) => {return acc + curr.count}, 0));\r\n        setIsMarked(true);\r\n        setTimeout(() => {\r\n            setIsMarked(false);\r\n        }, 200);\r\n    }, [addedBooks])\r\n\r\n    const clean = () => {\r\n        LocalStorageService.removeAll();\r\n        setUser('');\r\n        setAddedBooks([]);\r\n    };\r\n\r\n    return (\r\n        <nav className={styles.navbar}>\r\n            <div className='container d-flex justify-content-end'>\r\n                <Link to=\"/bookList\">\r\n                    <i className=\"fa-solid fa-book\"></i>\r\n                </Link>\r\n                <Link className={styles.cart_icon} to=\"/cart\">\r\n                    <i style={style}  className=\"fa-solid fa-cart-shopping\"></i>\r\n                    <span  className={styles.cart_counter} >{totalCount}</span>\r\n                </Link>\r\n                <p>\r\n                    <i className=\"fa-solid fa-user-large\"></i>\r\n                    <span className={styles.user}>{user}</span>\r\n                </p>\r\n                <Link onClick={clean} to=\"/\">\r\n                    <i className=\"fa-solid fa-person-walking-dashed-line-arrow-right\"></i>\r\n                </Link>\r\n            </div>\r\n        </nav>\r\n    )\r\n}"],"mappings":"AAAA,OAAQA,QAAQ,CAAEC,SAAS,KAAO,OAAO,CACzC,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,OAAO,KAAQ,wBAAwB,CAChD,OAASC,QAAQ,KAAQ,yBAAyB,CAClD,OAASC,mBAAmB,KAAQ,6BAA6B,CACjE,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1C,cAAe,SAAS,CAAAC,MAAMA,CAAA,CAAG,CAC7B,KAAM,CAAEC,UAAU,CAAEC,aAAa,CAAE,CAAGb,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAAEc,IAAI,CAAEC,OAAQ,CAAC,CAAGZ,OAAO,CAAC,CAAC,CACnC,KAAM,CAAEa,UAAU,CAAEC,aAAc,CAAC,CAAGb,QAAQ,CAAC,CAAC,CAChD,KAAM,CAACc,QAAQ,CAAEC,WAAW,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAAoB,KAAK,CAAG,CACVC,KAAK,CAAEH,QAAQ,CAAG,SAAS,CAAG,EAAE,CAChCI,UAAU,CAAE,MAChB,CAAC,CAEDrB,SAAS,CAAC,IAAI,CACVY,aAAa,CAACG,UAAU,CAACO,MAAM,CAAC,CAACC,GAAG,CAAEC,IAAI,GAAK,CAAC,MAAO,CAAAD,GAAG,CAAGC,IAAI,CAACC,KAAK,EAAC,CAAE,CAAC,CAAC,CAAC,CAC7EP,WAAW,CAAC,IAAI,CAAC,CACjBQ,UAAU,CAAC,IAAM,CACbR,WAAW,CAAC,KAAK,CAAC,CACtB,CAAC,CAAE,GAAG,CAAC,CACX,CAAC,CAAE,CAACH,UAAU,CAAC,CAAC,CAEhB,KAAM,CAAAY,KAAK,CAAGA,CAAA,GAAM,CAChBvB,mBAAmB,CAACwB,SAAS,CAAC,CAAC,CAC/Bd,OAAO,CAAC,EAAE,CAAC,CACXE,aAAa,CAAC,EAAE,CAAC,CACrB,CAAC,CAED,mBACIT,IAAA,QAAKsB,SAAS,CAAExB,MAAM,CAACyB,MAAO,CAAAC,QAAA,cAC1BtB,KAAA,QAAKoB,SAAS,CAAC,sCAAsC,CAAAE,QAAA,eACjDxB,IAAA,CAACN,IAAI,EAAC+B,EAAE,CAAC,WAAW,CAAAD,QAAA,cAChBxB,IAAA,MAAGsB,SAAS,CAAC,kBAAkB,CAAI,CAAC,CAClC,CAAC,cACPpB,KAAA,CAACR,IAAI,EAAC4B,SAAS,CAAExB,MAAM,CAAC4B,SAAU,CAACD,EAAE,CAAC,OAAO,CAAAD,QAAA,eACzCxB,IAAA,MAAGY,KAAK,CAAEA,KAAM,CAAEU,SAAS,CAAC,2BAA2B,CAAI,CAAC,cAC5DtB,IAAA,SAAOsB,SAAS,CAAExB,MAAM,CAAC6B,YAAa,CAAAH,QAAA,CAAGpB,UAAU,CAAO,CAAC,EACzD,CAAC,cACPF,KAAA,MAAAsB,QAAA,eACIxB,IAAA,MAAGsB,SAAS,CAAC,wBAAwB,CAAI,CAAC,cAC1CtB,IAAA,SAAMsB,SAAS,CAAExB,MAAM,CAACQ,IAAK,CAAAkB,QAAA,CAAElB,IAAI,CAAO,CAAC,EAC5C,CAAC,cACJN,IAAA,CAACN,IAAI,EAACkC,OAAO,CAAER,KAAM,CAACK,EAAE,CAAC,GAAG,CAAAD,QAAA,cACxBxB,IAAA,MAAGsB,SAAS,CAAC,oDAAoD,CAAI,CAAC,CACpE,CAAC,EACN,CAAC,CACL,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
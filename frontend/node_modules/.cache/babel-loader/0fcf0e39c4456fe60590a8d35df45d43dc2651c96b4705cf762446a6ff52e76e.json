{"ast":null,"code":"import{useState,useEffect}from'react';import{ErrorBoundary}from'react-error-boundary';import{Outlet}from\"react-router-dom\";import{UserProvider}from'../context/use-user';import{BooksProvider}from'../context/use-books';import{LocalStorageService,LS_KEYS}from'../services/localStorage';import Header from'../components/Header/Header';import Footer from'../components/Footer/Footer';import NotFoundPage from'../components/NotFoundPage/NotFoundPage';import styles from'./App.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(LocalStorageService.get(LS_KEYS.USER)||'');const[addedBooks,setAddedBooks]=useState(LocalStorageService.get(LS_KEYS.ADDEDBOOKS)||[]);const[books,setBooks]=useState(LocalStorageService.get(LS_KEYS.BOOKS)||[]);useEffect(()=>LocalStorageService.set(LS_KEYS.USER,user),[user]);useEffect(()=>LocalStorageService.set(LS_KEYS.ADDEDBOOKS,addedBooks),[addedBooks]);useEffect(()=>LocalStorageService.set(LS_KEYS.BOOKS,books),[books]);useEffect(()=>{fetch('./books.json').then(res=>res.json()).then(data=>setBooks(data.books)).catch(err=>console.log('error: ',err));},[]);return/*#__PURE__*/_jsx(ErrorBoundary,{fallback:/*#__PURE__*/_jsx(NotFoundPage,{}),children:/*#__PURE__*/_jsx(UserProvider,{value:{user,setUser},children:/*#__PURE__*/_jsx(BooksProvider,{value:{books,addedBooks,setAddedBooks},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.app,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Outlet,{}),/*#__PURE__*/_jsx(Footer,{})]})})})});}export default App;","map":{"version":3,"names":["useState","useEffect","ErrorBoundary","Outlet","UserProvider","BooksProvider","LocalStorageService","LS_KEYS","Header","Footer","NotFoundPage","styles","jsx","_jsx","jsxs","_jsxs","App","user","setUser","get","USER","addedBooks","setAddedBooks","ADDEDBOOKS","books","setBooks","BOOKS","set","fetch","then","res","json","data","catch","err","console","log","fallback","children","value","className","app"],"sources":["E:/Dragon/IT/ciklum/X-course-task/x-course-task/src/containers/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport { Outlet } from \"react-router-dom\";\nimport { UserProvider } from '../context/use-user';\nimport { BooksProvider } from '../context/use-books';\nimport { LocalStorageService, LS_KEYS } from '../services/localStorage';\nimport Header from '../components/Header/Header'\nimport Footer from '../components/Footer/Footer';\nimport NotFoundPage from '../components/NotFoundPage/NotFoundPage';\nimport styles from './App.module.scss';\n\n\nfunction App() {\n  const [user, setUser] = useState(LocalStorageService.get(LS_KEYS.USER) || '');\n  const [addedBooks, setAddedBooks] = useState(LocalStorageService.get(LS_KEYS.ADDEDBOOKS) || []);\n  const [books, setBooks] = useState(LocalStorageService.get(LS_KEYS.BOOKS) || []);\n  useEffect(() => LocalStorageService.set(LS_KEYS.USER, user), [user]);\n  useEffect(() => LocalStorageService.set(LS_KEYS.ADDEDBOOKS, addedBooks), [addedBooks]);\n  useEffect(() => LocalStorageService.set(LS_KEYS.BOOKS, books), [books]);\n\n  useEffect(() => {\n    fetch('./books.json')\n      .then(res => res.json())\n      .then(data => setBooks(data.books))\n      .catch(err => console.log('error: ', err)\n      );\n  }, []);\n\n  return (\n    <ErrorBoundary\n      fallback={\n        <NotFoundPage />\n      }\n    >\n      <UserProvider value={{\n        user,\n        setUser,\n      }}>\n        <BooksProvider value={{\n          books,\n          addedBooks,\n          setAddedBooks\n        }}>\n          <div className={styles.app}>\n            <Header />\n            <Outlet />\n            <Footer />\n          </div>\n        </BooksProvider>\n      </UserProvider>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,aAAa,KAAQ,sBAAsB,CACpD,OAASC,MAAM,KAAQ,kBAAkB,CACzC,OAASC,YAAY,KAAQ,qBAAqB,CAClD,OAASC,aAAa,KAAQ,sBAAsB,CACpD,OAASC,mBAAmB,CAAEC,OAAO,KAAQ,0BAA0B,CACvE,MAAO,CAAAC,MAAM,KAAM,6BAA6B,CAChD,MAAO,CAAAC,MAAM,KAAM,6BAA6B,CAChD,MAAO,CAAAC,YAAY,KAAM,yCAAyC,CAClE,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAGvC,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGlB,QAAQ,CAACM,mBAAmB,CAACa,GAAG,CAACZ,OAAO,CAACa,IAAI,CAAC,EAAI,EAAE,CAAC,CAC7E,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGtB,QAAQ,CAACM,mBAAmB,CAACa,GAAG,CAACZ,OAAO,CAACgB,UAAU,CAAC,EAAI,EAAE,CAAC,CAC/F,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGzB,QAAQ,CAACM,mBAAmB,CAACa,GAAG,CAACZ,OAAO,CAACmB,KAAK,CAAC,EAAI,EAAE,CAAC,CAChFzB,SAAS,CAAC,IAAMK,mBAAmB,CAACqB,GAAG,CAACpB,OAAO,CAACa,IAAI,CAAEH,IAAI,CAAC,CAAE,CAACA,IAAI,CAAC,CAAC,CACpEhB,SAAS,CAAC,IAAMK,mBAAmB,CAACqB,GAAG,CAACpB,OAAO,CAACgB,UAAU,CAAEF,UAAU,CAAC,CAAE,CAACA,UAAU,CAAC,CAAC,CACtFpB,SAAS,CAAC,IAAMK,mBAAmB,CAACqB,GAAG,CAACpB,OAAO,CAACmB,KAAK,CAAEF,KAAK,CAAC,CAAE,CAACA,KAAK,CAAC,CAAC,CAEvEvB,SAAS,CAAC,IAAM,CACd2B,KAAK,CAAC,cAAc,CAAC,CAClBC,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,EAAIP,QAAQ,CAACO,IAAI,CAACR,KAAK,CAAC,CAAC,CAClCS,KAAK,CAACC,GAAG,EAAIC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEF,GAAG,CACxC,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,mBACErB,IAAA,CAACX,aAAa,EACZmC,QAAQ,cACNxB,IAAA,CAACH,YAAY,GAAE,CAChB,CAAA4B,QAAA,cAEDzB,IAAA,CAACT,YAAY,EAACmC,KAAK,CAAE,CACnBtB,IAAI,CACJC,OACF,CAAE,CAAAoB,QAAA,cACAzB,IAAA,CAACR,aAAa,EAACkC,KAAK,CAAE,CACpBf,KAAK,CACLH,UAAU,CACVC,aACF,CAAE,CAAAgB,QAAA,cACAvB,KAAA,QAAKyB,SAAS,CAAE7B,MAAM,CAAC8B,GAAI,CAAAH,QAAA,eACzBzB,IAAA,CAACL,MAAM,GAAE,CAAC,cACVK,IAAA,CAACV,MAAM,GAAE,CAAC,cACVU,IAAA,CAACJ,MAAM,GAAE,CAAC,EACP,CAAC,CACO,CAAC,CACJ,CAAC,CACF,CAAC,CAEpB,CAEA,cAAe,CAAAO,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
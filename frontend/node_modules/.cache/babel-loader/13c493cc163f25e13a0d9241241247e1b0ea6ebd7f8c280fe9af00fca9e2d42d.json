{"ast":null,"code":"import{useState}from'react';import{useParams}from'react-router-dom';import{useBooks}from'../../context/use-books';import Navbar from'../Navbar/Navbar';import styles from'./SpecificBook.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function SpecificBook(){const{bookId}=useParams();const{books}=useBooks();const book=books.find(book=>+book.id===+bookId);const{addedBooks,setAddedBooks}=useBooks();const addedBook=addedBooks.find(book=>+book.id===+bookId)||{};const bookShortName=book.title.length>24?book.title.slice(0,24)+'...':book.title;const[bookTitle,setBookTitle]=useState(bookShortName);const[count,setCount]=useState(addedBook.count||0);const handleMouseEnter=event=>{setBookTitle(book.title);};const handleMouseLeave=event=>{setBookTitle(bookShortName);};const handleCountInput=event=>{if(event.target.value>=0&&event.target.value<=42){setCount(event.target.value);}};const handleDecrease=()=>{if(+count-1>=0){setCount(+count-1);}};const handleIncrease=()=>{if(+count+1<=42){setCount(+count+1);}};const handleButton=event=>{const bookId=+event.target.getAttribute('book-id');const foundBook=addedBooks.find(item=>item.id===bookId);const currentCount=+count;if(!foundBook){setAddedBooks(prevState=>[...prevState,{...book,count:currentCount}]);}else{setAddedBooks(prevState=>prevState.map(book=>{if(book.id===bookId){return{...book,count:currentCount};}else{return{...book};}}));}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"section\",{className:styles.specificBook,children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Book\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-5 col-md-4 d-flex align-items-center justify-content-center  \".concat(styles.specificBook_image),children:/*#__PURE__*/_jsx(\"img\",{className:\"img-fluid\",src:book.image||\"../../imageNotFound.png\",alt:\"book\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-5 col-md-4 mt-3\",children:[/*#__PURE__*/_jsxs(\"h4\",{onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,children:[\"Book name: \",/*#__PURE__*/_jsx(\"span\",{children:bookTitle})]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Book author: \",/*#__PURE__*/_jsx(\"span\",{children:book.author}),\" \"]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Book level: \",/*#__PURE__*/_jsx(\"span\",{children:book.level}),\" \"]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Book tags: \",/*#__PURE__*/_jsx(\"span\",{children:book.tags.join(', ')})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-6 col-md-4\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"Price:\",/*#__PURE__*/_jsxs(\"span\",{id:\"price\",children:[\" \",book.price,\"$\"]})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"Count:\",/*#__PURE__*/_jsx(\"button\",{\"data-testid\":\"decreaseCount\",onClick:handleDecrease,children:\"-\"}),/*#__PURE__*/_jsx(\"input\",{\"data-testid\":\"countInput\",min:1,max:42,value:count,onChange:handleCountInput}),/*#__PURE__*/_jsx(\"button\",{\"data-testid\":\"increaseCount\",onClick:handleIncrease,children:\"+\"})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"Total price:\",/*#__PURE__*/_jsxs(\"span\",{\"data-testid\":\"totalPrice\",children:[\" \",(count*book.price).toFixed(2),\"$\"]})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-danger \".concat(styles.button),onClick:handleButton,\"book-id\":book.id,disabled:+count===0,children:\"Add to cart\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.specificBook_descriptionInfa,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{children:book.description})]})]})})]});}","map":{"version":3,"names":["useState","useParams","useBooks","Navbar","styles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SpecificBook","bookId","books","book","find","id","addedBooks","setAddedBooks","addedBook","bookShortName","title","length","slice","bookTitle","setBookTitle","count","setCount","handleMouseEnter","event","handleMouseLeave","handleCountInput","target","value","handleDecrease","handleIncrease","handleButton","getAttribute","foundBook","item","currentCount","prevState","map","children","className","specificBook","concat","specificBook_image","src","image","alt","onMouseEnter","onMouseLeave","author","level","tags","join","price","onClick","min","max","onChange","toFixed","button","disabled","specificBook_descriptionInfa","description"],"sources":["E:/Dragon/IT/ciklum/X-course-task/x-course-task/src/components/SpecificBook/SpecificBook.js"],"sourcesContent":["import { useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useBooks } from '../../context/use-books';\r\nimport Navbar from '../Navbar/Navbar';\r\nimport styles from './SpecificBook.module.scss';\r\n\r\nexport default function SpecificBook() {\r\n    const { bookId } = useParams();\r\n    const {books} = useBooks();\r\n    const book = books.find((book) => +book.id === +bookId);\r\n    const { addedBooks, setAddedBooks } = useBooks();\r\n    const addedBook = addedBooks.find((book) => +book.id === +bookId) || {};\r\n    const bookShortName = book.title.length > 24 ? book.title.slice(0, 24) + '...' : book.title\r\n    const [bookTitle, setBookTitle] = useState(bookShortName);\r\n    const [count, setCount] = useState(addedBook.count || 0);\r\n\r\n    const handleMouseEnter = (event) => {\r\n        setBookTitle(book.title);\r\n    }\r\n\r\n    const handleMouseLeave = (event) => {\r\n        setBookTitle(bookShortName);\r\n    }\r\n\r\n    const handleCountInput = (event) => {\r\n        if (event.target.value >= 0 && event.target.value <= 42) {\r\n            setCount(event.target.value);\r\n        }\r\n    }\r\n\r\n    const handleDecrease = () =>{\r\n        if (+count - 1 >= 0){\r\n            setCount(+count - 1)\r\n        }\r\n    }\r\n\r\n    const handleIncrease = () => {\r\n        if (+count + 1 <= 42) {\r\n            setCount(+count + 1)\r\n        }\r\n    }\r\n\r\n    const handleButton = (event) => {\r\n        const bookId = + event.target.getAttribute('book-id');\r\n        const foundBook = addedBooks.find(item => item.id === bookId);\r\n        const currentCount = +count;\r\n        if (!foundBook) {\r\n            setAddedBooks(prevState => [\r\n                ...prevState,\r\n                { ...book, count: currentCount }\r\n            ]);\r\n        }\r\n        else {\r\n            setAddedBooks(prevState => prevState.map(book => {\r\n                if (book.id === bookId) {\r\n                    return {\r\n                        ...book,\r\n                        count: currentCount,\r\n                    };\r\n                } else {\r\n                    return { ...book };\r\n                }\r\n            }));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Navbar />\r\n            <section className={styles.specificBook}>\r\n                <div className=\"container\">\r\n                    <h1>Book</h1>\r\n                    <div className=\"row mt-3\">\r\n                        <div className={`col-sm-5 col-md-4 d-flex align-items-center justify-content-center  ${styles.specificBook_image}`}>\r\n                            <img className=\"img-fluid\" src={book.image || \"../../imageNotFound.png\"}\r\n                                alt=\"book\" />\r\n                        </div>\r\n                        <div className=\"col-sm-5 col-md-4 mt-3\">\r\n                            <h4 \r\n                                onMouseEnter={handleMouseEnter}\r\n                                onMouseLeave={handleMouseLeave}>\r\n                                Book name: <span>{bookTitle}</span>\r\n                            </h4>\r\n                            <h4>Book author: <span>{book.author}</span> </h4>\r\n                            <h4>Book level: <span>{book.level}</span> </h4>\r\n                            <h4>Book tags: <span>{book.tags.join(', ')}</span></h4>\r\n                        </div>\r\n                        <div className=\"col-sm-6 col-md-4\">\r\n                            <div>\r\n                                <h4>Price:\r\n                                    <span id=\"price\"> {book.price}$</span>\r\n                                </h4>\r\n                            </div>\r\n                            <div>\r\n                                <h4>Count: \r\n                                    <button data-testid='decreaseCount' onClick={handleDecrease}>-</button>\r\n                                    <input data-testid='countInput' min={1} max={42} value={count} onChange={handleCountInput}/>\r\n                                    <button data-testid='increaseCount' onClick={handleIncrease}>+</button>\r\n                                </h4>\r\n                            </div>\r\n                            <div>\r\n                                <h4>Total price:\r\n                                    <span data-testid='totalPrice'> {(count * book.price).toFixed(2)}$</span>\r\n                                </h4>\r\n                            </div>\r\n                            <button className={`btn btn-outline-danger ${styles.button}`} onClick={handleButton} book-id={book.id} disabled={+count === 0}>Add to cart</button>\r\n                        </div>\r\n                    </div>\r\n                    <div className={styles.specificBook_descriptionInfa}>\r\n                        <h4>Description</h4>\r\n                        <p>{book.description}</p>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import{useState,useEffect}from'react';import{debounce}from'lodash';import styles from'./BookList.module.scss';import Navbar from'../Navbar/Navbar';import Book from'../Book/Book';import{useBooks}from'../../context/use-books';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function BookList(){const{books}=useBooks();const[searchByPrice,setSearchByPrice]=useState('');const[searchByBookName,setSearchByBookName]=useState('');const[filteredBooksByPrice,setFilteredBooksByPrice]=useState([]);const[filteredBooksGeneral,setFilteredBooksGeneral]=useState([]);useEffect(()=>{if(books&&searchByPrice){const[min,max]=JSON.parse(searchByPrice);setFilteredBooksByPrice(books.filter(book=>{if(max){return book.price>=min&&book.price<=max;}else{return book.price>=min;}}));}},[books,searchByPrice]);useEffect(()=>{if(books){setFilteredBooksGeneral((filteredBooksByPrice.length===0?books:filteredBooksByPrice).filter(book=>book.title.toLowerCase().includes(searchByBookName)));}},[books,filteredBooksByPrice,searchByBookName,searchByPrice]);const debouncedHandleInput=debounce(value=>{setSearchByBookName(value);},500);const handleInput=event=>{debouncedHandleInput(event.target.value);};const handleSelect=event=>{setSearchByPrice(event.target.value);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:styles.bookList,children:/*#__PURE__*/_jsxs(\"div\",{className:\"container p-3\",children:[/*#__PURE__*/_jsxs(\"form\",{action:\"\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Book:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by book name\",onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Price:\",/*#__PURE__*/_jsxs(\"select\",{type:\"number\",id:\"inputSearchByPrice\",onChange:handleSelect,children:[/*#__PURE__*/_jsx(\"option\",{value:\"[0]\",children:\"All books\"}),/*#__PURE__*/_jsx(\"option\",{value:\"[0, 15]\",children:\"up to 15$\"}),/*#__PURE__*/_jsx(\"option\",{value:\"[15, 30]\",children:\"15$ - 30$\"}),/*#__PURE__*/_jsx(\"option\",{value:\"[30]\",children:\"30$ and more\"})]})]})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All books\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container \".concat(styles.containerWrap),children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:books?filteredBooksGeneral.map(function(book){return/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 col-md-4 col-sm-6 col-12 mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded bg-warning-subtle flex-column h-100\",children:/*#__PURE__*/_jsx(Book,{book:book})})},book.id);}):\"\"})})]})]})})]});}","map":{"version":3,"names":["useState","useEffect","debounce","styles","Navbar","Book","useBooks","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BookList","books","searchByPrice","setSearchByPrice","searchByBookName","setSearchByBookName","filteredBooksByPrice","setFilteredBooksByPrice","filteredBooksGeneral","setFilteredBooksGeneral","min","max","JSON","parse","filter","book","price","length","title","toLowerCase","includes","debouncedHandleInput","value","handleInput","event","target","handleSelect","children","className","bookList","action","type","placeholder","onChange","id","concat","containerWrap","map"],"sources":["E:/Dragon/IT/ciklum/X-course-task/x-course-task/src/components/BookList/BookList.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { debounce } from 'lodash';\r\nimport styles from './BookList.module.scss';\r\nimport Navbar from '../Navbar/Navbar';\r\nimport Book from '../Book/Book';\r\nimport { useBooks } from '../../context/use-books';\r\n\r\n\r\nexport default function BookList() {\r\n    const {books} = useBooks();\r\n    const [searchByPrice, setSearchByPrice] = useState('');\r\n    const [searchByBookName, setSearchByBookName] = useState('');\r\n    const [filteredBooksByPrice, setFilteredBooksByPrice] = useState([]);\r\n    const [filteredBooksGeneral, setFilteredBooksGeneral] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if (books && searchByPrice) {\r\n            const [min, max] = JSON.parse(searchByPrice);\r\n            setFilteredBooksByPrice(books.filter((book) => {\r\n                if (max) {\r\n                    return (book.price >= min && book.price <= max)\r\n                }\r\n                else {\r\n                    return (book.price >= min)\r\n                }\r\n            }));\r\n        }\r\n    }, [books, searchByPrice]);\r\n\r\n    useEffect(() => {\r\n        if (books) {\r\n            setFilteredBooksGeneral((filteredBooksByPrice.length === 0 ? books : filteredBooksByPrice).filter((book) => book.title.toLowerCase().includes(searchByBookName)));\r\n        }\r\n    }, [books, filteredBooksByPrice, searchByBookName, searchByPrice]);\r\n\r\n\r\n    const debouncedHandleInput = debounce((value) => {\r\n        setSearchByBookName(value);\r\n    }, 500);\r\n\r\n    const handleInput = (event) => {\r\n        debouncedHandleInput(event.target.value);\r\n    }\r\n\r\n    const handleSelect = (event) => {\r\n        setSearchByPrice(event.target.value);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Navbar />\r\n            <div className={styles.bookList}>\r\n                <div className=\"container p-3\">\r\n                    <form action=\"\">\r\n                        <label>\r\n                            Book:\r\n                            <input type=\"text\" placeholder=\"Search by book name\" onChange={handleInput} />\r\n                        </label>\r\n                        <label>\r\n                            Price:\r\n                            <select type=\"number\" id=\"inputSearchByPrice\" onChange={handleSelect} >\r\n                                <option value=\"[0]\">All books</option>\r\n                                <option value=\"[0, 15]\">up to 15$</option>\r\n                                <option value=\"[15, 30]\">15$ - 30$</option>\r\n                                <option value=\"[30]\">30$ and more</option>\r\n                            </select>\r\n                        </label>\r\n\r\n                    </form>\r\n                    <section>\r\n                        <h1>All books</h1>\r\n                        <div className={`container ${styles.containerWrap}`}>\r\n                            <div className=\"row\">\r\n                                {books ? filteredBooksGeneral.map(function (book) {\r\n                                    return (\r\n                                        <div className=\"col-lg-3 col-md-4 col-sm-6 col-12 mb-4\" key={book.id}>\r\n                                            <div className=\"p-3 rounded bg-warning-subtle flex-column h-100\">\r\n                                                <Book book={book} />\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                }) : \"\"\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import{useState,useEffect}from'react';import{ErrorBoundary}from'react-error-boundary';import{Outlet}from\"react-router-dom\";import{BooksProvider}from'../context/use-books';import{LocalStorageService,LS_KEYS}from'../services/localStorage';import Header from'../components/Header/Header';import Footer from'../components/Footer/Footer';import NotFoundPage from'../components/NotFoundPage/NotFoundPage';import styles from'./App.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[addedBooks,setAddedBooks]=useState(LocalStorageService.get(LS_KEYS.ADDEDBOOKS)||[]);const[books,setBooks]=useState(LocalStorageService.get(LS_KEYS.BOOKS)||[]);useEffect(()=>LocalStorageService.set(LS_KEYS.ADDEDBOOKS,addedBooks),[addedBooks]);useEffect(()=>LocalStorageService.set(LS_KEYS.BOOKS,books),[books]);useEffect(()=>{fetch(\"\".concat(process.env.PUBLIC_URL,\"/books.json\")).then(res=>res.json()).then(data=>setBooks(data.books)).catch(err=>console.log('error: ',err));},[]);return/*#__PURE__*/_jsx(ErrorBoundary,{fallback:/*#__PURE__*/_jsx(NotFoundPage,{}),children:/*#__PURE__*/_jsx(BooksProvider,{value:{books,addedBooks,setAddedBooks},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.app,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Outlet,{}),/*#__PURE__*/_jsx(Footer,{})]})})});}export default App;","map":{"version":3,"names":["useState","useEffect","ErrorBoundary","Outlet","BooksProvider","LocalStorageService","LS_KEYS","Header","Footer","NotFoundPage","styles","jsx","_jsx","jsxs","_jsxs","App","addedBooks","setAddedBooks","get","ADDEDBOOKS","books","setBooks","BOOKS","set","fetch","concat","process","env","PUBLIC_URL","then","res","json","data","catch","err","console","log","fallback","children","value","className","app"],"sources":["E:/Dragon/IT/ciklum/X-course-task/x-course-task/src/containers/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { ErrorBoundary } from 'react-error-boundary';\r\nimport { Outlet } from \"react-router-dom\";\r\nimport { BooksProvider } from '../context/use-books';\r\nimport { LocalStorageService, LS_KEYS } from '../services/localStorage';\r\nimport Header from '../components/Header/Header'\r\nimport Footer from '../components/Footer/Footer';\r\nimport NotFoundPage from '../components/NotFoundPage/NotFoundPage';\r\nimport styles from './App.module.scss';\r\n\r\n\r\nfunction App() {\r\n  const [addedBooks, setAddedBooks] = useState(LocalStorageService.get(LS_KEYS.ADDEDBOOKS) || []);\r\n  const [books, setBooks] = useState(LocalStorageService.get(LS_KEYS.BOOKS) || []);\r\n  useEffect(() => LocalStorageService.set(LS_KEYS.ADDEDBOOKS, addedBooks), [addedBooks]);\r\n  useEffect(() => LocalStorageService.set(LS_KEYS.BOOKS, books), [books]);\r\n\r\n  useEffect(() => {\r\n    fetch(`${process.env.PUBLIC_URL}/books.json`)\r\n      .then(res => res.json())\r\n      .then(data => setBooks(data.books))\r\n      .catch(err => console.log('error: ', err)\r\n      );\r\n  }, []);\r\n\r\n  return (\r\n    <ErrorBoundary\r\n      fallback={\r\n        <NotFoundPage />\r\n      }\r\n    >\r\n      <BooksProvider value={{\r\n          books,\r\n          addedBooks,\r\n          setAddedBooks\r\n        }}>\r\n          <div className={styles.app}>\r\n            <Header />\r\n            <Outlet />\r\n            <Footer />\r\n          </div>\r\n        </BooksProvider>\r\n    </ErrorBoundary>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,aAAa,KAAQ,sBAAsB,CACpD,OAASC,MAAM,KAAQ,kBAAkB,CACzC,OAASC,aAAa,KAAQ,sBAAsB,CACpD,OAASC,mBAAmB,CAAEC,OAAO,KAAQ,0BAA0B,CACvE,MAAO,CAAAC,MAAM,KAAM,6BAA6B,CAChD,MAAO,CAAAC,MAAM,KAAM,6BAA6B,CAChD,MAAO,CAAAC,YAAY,KAAM,yCAAyC,CAClE,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAGvC,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGjB,QAAQ,CAACK,mBAAmB,CAACa,GAAG,CAACZ,OAAO,CAACa,UAAU,CAAC,EAAI,EAAE,CAAC,CAC/F,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGrB,QAAQ,CAACK,mBAAmB,CAACa,GAAG,CAACZ,OAAO,CAACgB,KAAK,CAAC,EAAI,EAAE,CAAC,CAChFrB,SAAS,CAAC,IAAMI,mBAAmB,CAACkB,GAAG,CAACjB,OAAO,CAACa,UAAU,CAAEH,UAAU,CAAC,CAAE,CAACA,UAAU,CAAC,CAAC,CACtFf,SAAS,CAAC,IAAMI,mBAAmB,CAACkB,GAAG,CAACjB,OAAO,CAACgB,KAAK,CAAEF,KAAK,CAAC,CAAE,CAACA,KAAK,CAAC,CAAC,CAEvEnB,SAAS,CAAC,IAAM,CACduB,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,UAAU,eAAa,CAAC,CAC1CC,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,EAAIX,QAAQ,CAACW,IAAI,CAACZ,KAAK,CAAC,CAAC,CAClCa,KAAK,CAACC,GAAG,EAAIC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEF,GAAG,CACxC,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEtB,IAAA,CAACV,aAAa,EACZmC,QAAQ,cACNzB,IAAA,CAACH,YAAY,GAAE,CAChB,CAAA6B,QAAA,cAED1B,IAAA,CAACR,aAAa,EAACmC,KAAK,CAAE,CAClBnB,KAAK,CACLJ,UAAU,CACVC,aACF,CAAE,CAAAqB,QAAA,cACAxB,KAAA,QAAK0B,SAAS,CAAE9B,MAAM,CAAC+B,GAAI,CAAAH,QAAA,eACzB1B,IAAA,CAACL,MAAM,GAAE,CAAC,cACVK,IAAA,CAACT,MAAM,GAAE,CAAC,cACVS,IAAA,CAACJ,MAAM,GAAE,CAAC,EACP,CAAC,CACO,CAAC,CACL,CAAC,CAEpB,CAEA,cAAe,CAAAO,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import{useBooks}from'../../context/use-books';import{LocalStorageService,LS_KEYS}from'../../services/localStorage';import Navbar from'../Navbar/Navbar';import BookInCart from'../BookInCart/BookInCart';import styles from'./Cart.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Cart(){const{addedBooks,setAddedBooks}=useBooks();let totalPrice=0;const handleCountInput=event=>{const bookId=+event.target.getAttribute('book-id');const newCountValue=+event.target.value;if(newCountValue>=0&&newCountValue<=42){setAddedBooks(prevState=>prevState.map(book=>{if(book.id===bookId){return{...book,count:newCountValue};}else{return{...book};}}));}};const handleRemove=event=>{const bookId=+event.target.getAttribute('book-id');setAddedBooks(prevState=>prevState.filter(book=>book.id!==bookId));};const handleRemoveAll=()=>{LocalStorageService.remove(LS_KEYS.ADDEDBOOKS,addedBooks);setAddedBooks([]);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:styles.cart,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.removeAllButton,onClick:handleRemoveAll,disabled:addedBooks.length===0,children:\"Remove all\"}),addedBooks.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"container pt-5 \".concat(styles.emptyCart),children:[/*#__PURE__*/_jsx(\"div\",{className:styles.cartIcon,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-cart-shopping\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"Cart is empty yet ... \"})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[addedBooks.map(function(book){const priceForItem=+(book.count*book.price).toFixed(2);totalPrice=+(totalPrice+priceForItem).toFixed(2);return/*#__PURE__*/_jsxs(\"div\",{className:\"row p-2 rounded mt-5 \".concat(styles.cart_bookWrapper),children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-sm-3 col-md-3\",children:/*#__PURE__*/_jsx(BookInCart,{book:book})},book.id),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-sm-3 col-md-3  \".concat(styles.mainBookInfa),children:[/*#__PURE__*/_jsx(\"p\",{children:book.title}),/*#__PURE__*/_jsx(\"p\",{children:book.author}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",book.price,\"$ \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-sm-2 col-md-2\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"count\",type:\"number\",min:1,max:42,value:book.count,\"book-id\":book.id,onChange:handleCountInput,inputMode:\"numeric\"}),\"pcs.\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-sm-2 col-md-2\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\" Price\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",priceForItem,\"$ \"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-sm-1 col-md-1\",children:/*#__PURE__*/_jsx(\"button\",{className:styles.removeButton,\"book-id\":book.id,onClick:handleRemove,children:\"Remove\"})})]});}),/*#__PURE__*/_jsxs(\"div\",{className:styles.totalPrice,children:[\"Total Price:\",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",totalPrice,\"$ \"]})]})]})})]})]});}","map":{"version":3,"names":["useBooks","LocalStorageService","LS_KEYS","Navbar","BookInCart","styles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Cart","addedBooks","setAddedBooks","totalPrice","handleCountInput","event","bookId","target","getAttribute","newCountValue","value","prevState","map","book","id","count","handleRemove","filter","handleRemoveAll","remove","ADDEDBOOKS","children","className","cart","removeAllButton","onClick","disabled","length","concat","emptyCart","cartIcon","priceForItem","price","toFixed","cart_bookWrapper","mainBookInfa","title","author","type","min","max","onChange","inputMode","removeButton"],"sources":["E:/Dragon/IT/ciklum/X-course-task/x-course-task/src/components/Cart/Cart.js"],"sourcesContent":["import { useBooks } from '../../context/use-books';\r\nimport { LocalStorageService, LS_KEYS } from '../../services/localStorage';\r\nimport Navbar from '../Navbar/Navbar';\r\nimport BookInCart from '../BookInCart/BookInCart';\r\nimport styles from './Cart.module.scss';\r\n\r\nexport default function Cart() {\r\n    const { addedBooks, setAddedBooks } = useBooks();\r\n    let totalPrice = 0;\r\n\r\n    const handleCountInput = (event) => {\r\n        const bookId = + event.target.getAttribute('book-id');\r\n        const newCountValue = + event.target.value;\r\n        if (newCountValue >= 0 && newCountValue <= 42) {\r\n            setAddedBooks(prevState => prevState.map(book => {\r\n                if (book.id === bookId) {\r\n                    return {\r\n                        ...book,\r\n                        count: newCountValue,\r\n                    };\r\n                } else {\r\n                    return { ...book };\r\n                }\r\n            }));\r\n        }\r\n    };\r\n\r\n    const handleRemove = (event) => {\r\n        const bookId = + event.target.getAttribute('book-id');\r\n        setAddedBooks(prevState => prevState.filter(book => book.id !== bookId));\r\n    }\r\n\r\n    const handleRemoveAll = () => {\r\n        LocalStorageService.remove(LS_KEYS.ADDEDBOOKS, addedBooks);\r\n        setAddedBooks([]);\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            <Navbar />\r\n            <div className={styles.cart}>\r\n                <button className={styles.removeAllButton} onClick={handleRemoveAll} disabled={addedBooks.length === 0}>Remove all</button>\r\n                {(addedBooks.length === 0) ? (\r\n                    <div className={`container pt-5 ${styles.emptyCart}`}>\r\n                        <div className={styles.cartIcon}>\r\n                            <i className=\"fa-solid fa-cart-shopping\"></i>\r\n                        </div>\r\n                        <p>Cart is empty yet ... </p>\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        <div className=\"container\">\r\n                            {addedBooks.map(function (book) {\r\n                                const priceForItem = +(book.count * book.price).toFixed(2);\r\n                                totalPrice = +(totalPrice + priceForItem).toFixed(2);\r\n                                return (\r\n                                    <div className={`row p-2 rounded mt-5 ${styles.cart_bookWrapper}`}>\r\n                                        <div className=\"col-12 col-sm-3 col-md-3\" key={book.id}>\r\n                                            <BookInCart book={book} />\r\n                                        </div>\r\n                                        <div className={`col-12 col-sm-3 col-md-3  ${styles.mainBookInfa}`}>\r\n                                            <p>{book.title}</p>\r\n                                            <p>{book.author}</p>\r\n                                            <p> {book.price}$ </p>\r\n                                        </div>\r\n                                        <div className=\"col-12 col-sm-2 col-md-2\">\r\n                                            <input id=\"count\" type=\"number\" min={1} max={42} value={book.count} book-id={book.id} onChange={handleCountInput} inputMode=\"numeric\" />\r\n                                            pcs.\r\n                                        </div>\r\n                                        <div className=\"col-12 col-sm-2 col-md-2\">\r\n                                            <p>\r\n                                                <span> Price</span>\r\n                                                <span> {priceForItem}$ </span>\r\n                                            </p>\r\n                                        </div>\r\n                                        <div className=\"col-12 col-sm-1 col-md-1\">\r\n                                            <button className={styles.removeButton} book-id={book.id} onClick={handleRemove}>Remove</button>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                            <div className={styles.totalPrice}>\r\n                                Total Price:\r\n                                <span> {totalPrice}$ </span>\r\n                            </div>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
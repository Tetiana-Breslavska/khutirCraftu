# Marketplace Backend
## Опис
### Цей проект є бекендом для маркетплейсу. 
Він дозволяє створювати, оновлювати, видаляти та переглядати оголошення. 
Проект використовує Spring Boot для створення REST API та JPA для взаємодії з базою даних.

#### Вимоги
- Java 11 або вище
- Maven
- PostgreSQL

#### Встановлення

Клонувати репозиторій:

Копіювати код
git clone git clone -b backend https://github.com/Tetiana-Breslavska/khutirCraftu.git


Налаштувати базу даних PostgreSQL:


Копіювати код

#### CREATE DATABASE marketplace;

`create table products
(
product_id          bigint generated by default as identity (maxvalue 2147483647),`

`product_description varchar(255),`

`product_flag boolean not null,`

`product_info_seller varchar(255),`

`product_name        varchar(255),`

`product_price       double precision not null,`

`product_created_at  timestamp
);`

`alter table product`

`owner to postgres;`

#### Налаштувати application.properties:

Копіювати код

- `spring.datasource.url=jdbc:postgresql://localhost:5432/market_place`

- `spring.datasource.username=postgres`

- `spring.datasource.password=postgres`

- `spring.jpa.hibernate.ddl-auto=update`

#### Зібрати і запустити проект:

Копіювати код

- `mvn clean install`

- `mvn spring-boot:run`

### Використання

Створення оголошення

- `URL: POST /api/products/product`

Тіло запиту:

json


- `{`

- `"name": "Pepsi 2l",`

- `"price": 60.00,`

- `"infoSeller": "PepsiCo",`

- `"description": "none",`

- `"flag": true`

- `}`

Приклад відповіді:

json

- `{`

- `"product_id": 1,`

- `"name": "Pepsi 2l",`

- `"description": "none",`

- `"price": 60.00,`

- `"flag": true,`

- `"createAt": "2024-05-28T12:34:56.789+00:00",`

- `"infoSeller": "PepsiCo"`

- `}`

Отримання всіх оголошень

`URL: GET /api/products`

Приклад відповіді:

json

- `[`
- `{`
- `"product_id": 1,`
- `"name": "Pepsi 2l",`
- `"description": "none",`
- `"price": 60.00,`
- `"flag": true,`
- `"createAt": "2024-05-28T12:34:56.789+00:00",`
- `"infoSeller": "PepsiCo"`
- `},`
- `...`
- `]`

Пошук оголошень за назвою

`URL: GET /api/products/search?name=Pepsi`

Приклад відповіді:

json

- `[`
- `{`
- `"product_id": 1,`
- `"name": "Pepsi 2l",`
- `"description": "none",`
- `"price": 60.00,`
- `"flag": true,`
- `"createAt": "2024-05-28T12:34:56.789+00:00",`
- `"infoSeller": "PepsiCo"`
- `}`
- `]`
- 
Пагінація оголошень

`URL: GET /api/products?page=0&size=10`

## Для користувачів
Отримання всіх користувачів:

`URL: GET /api/person`

Додавання нового користувача:

`URL: POST /api/person/add_person`

Тіло запиту:

json

Копіювати код

- `{`
- `"email": "john.doe@example.com",`
- `"password": "password123"`
- `}`
- 
Отримання всіх продавців:

`URL: GET /api/person/sellers`

Додавання нового продавця:

`URL: POST /api/person/add_seller`

Тіло запиту:

json

Копіювати код
- `{`
- `"name": "Jane",`
- `"lastName": "Doe",`
- `"email": "jane.doe@example.com",`
- `"phoneNumber": "9876543210",`
- `"password": "sellerpassword123"`
- `}`

Додавання товару до обраних:

`URL: POST /api/person/{personId}/favorites/{productId}`

Видалення товару з обраних:

`URL: DELETE /api/person/{personId}/favorites/{productId} `

## Використання API

### Реєстрація користувача

`URL: POST /api/auth/register`

Тіло запиту:

`{`

`"email": "john.doe@example.com",`
`"password": "password123",`
`"confirmPassword": "password123"`
`}`


Приклад відповіді:

`{`

`"message": "User registered successfully"`

`}`

### Вхід користувача

`URL: POST /api/auth/login`

Тіло запиту:

`{`

`"email": "john.doe@example.com",`
`"password": "password123"`

`}`

Приклад відповіді:

`{`

`"token": "jwt_token"`

`}`

### Зміна ролі користувача на продавця

`URL: POST /api/auth/change-role-to-seller`

Параметри запиту:

`email - електронна пошта користувача`

Приклад відповіді:

`{`

`"message": "User role changed to seller successfully"`

`}`
